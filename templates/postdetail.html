{% extends "base.html" %}

{% block content %} 
<div class="blockcontent-postdetail"></div> 

{% block title %}
    <h3 class="text-center detailed-title">Detailed Post</h3>
{% endblock %} 



<div class="container">
    <div class="row">
        <div class="col-md-12">     
            <div class="card text-white bg-special mb-3 shadow-lg mb-6">
                <div class="text-center card-image">
                <img src="{{ post.image.url }}" class="card-img" alt="post-image" style="width: 800px; height: 400px">
                </div>
                <div class="card-body">  

                <p class="card-text ms-3"><strong>Name:</strong>&nbsp;{{ post.slug | safe }}</p>
                <p class="card-text ms-3"><strong>Author:</strong>&nbsp;{{ post.contributor | safe }}</p>
                <p class="card-text ms-3"><strong>Date:</strong>&nbsp; {{ post.date | safe }}</p>
                <p class="card-text ms-3"><strong>Image:</strong>&nbsp; {{ post.image  | safe}}</p>
                <p class="card-text ms-3"><strong>Content:</strong>&nbsp{{ post.content | safe }}</p>
                {% if user.is_authenticated %}
                {% if user.id == post.contributor.id %}
                    <a href="{% url 'postupdate' post.pk %}" class="postupdate-link">Update Post</a> &nbsp; 
    
                    <a href="{% url 'postdelete' post.pk %}" class="postdelete-link">Delete Post</a> &nbsp; 
    
                    <a href="{% url 'postcreate' post.pk %}" class="postcreate-link">Create Post</a> &nbsp; 
    
                 {% endif %}   
                                  
            {% else %}
            
            <a href="{% url 'postread' %}">Home</a>  
            {% endif %}
            </div>
        </div>
        
        </div>
  
    </div>

</div>
           
        <!-- <br>  -->
        <!-- <strong>  
        {{ post.name | safe }}</a>
        </strong> -->
         <!-- <br> -->
         <!-- <strong>
        {{ post.contributor| safe  }}
        </strong> -->
        <!-- <br> -->
        <!-- <strong>
        {{ post.date | safe }}
        </strong> -->
         <!-- <br> -->
<!--         
         {{ post.content | safe }} -->
         
        <!-- <br>
        <br>
        <br>
        <br> -->

        
    
  
   <hr> 
 

    <h2>Comment On The Post Above....</h2>

    {% if user.is_authenticated %}
    {% if user.id == post.contributor.id %}

        {% if not post.csiblog_comment.all %}
        No Comments Added As Of Yet    
        <a href="{% url 'commentadd' post.pk %}">
        Add Comment
        </a>
        {% else %}
       <a href="{% url 'commentadd' post.pk %}">Add Comment </a>
       {% for comment in post.csiblog_comment.all %}
                 <strong>
                 {{ comment.author | safe }} | {{ comment.added | safe }}
                </strong>
                 <br>
                <br>
                {{ comment.mainbody | safe }}
                <br>
                <br>
        {% endfor %}   
        {% endif %}

<br>
    <a href="{% url 'commentadd' post.pk %}">Add Comment </a>
    <a href="{% url 'commentupdate' post.pk %}">Update Comment </a>
    <a href="{% url 'commentdelete' post.pk %}">Delete Comment </a>

 
<br>
{% endif %}
<form action="{% url 'post_like' post.pk %}" method="POST">
    {% csrf_token %}
    <button type="submit", name="post_like" value="{{ post.id }}", class="btn btn-primary btn-sm">Like</button> - Number of Likes | <strong>{{ no_of_likes }}</strong> 
</form>
{% else %}
<a href="{% url 'postread' %}">Home</a>  
{% endif %}

{% endblock %}   
